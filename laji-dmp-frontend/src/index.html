<html>
<head>
  <meta charset="UTF-8">
  <title>Main</title>
  <script src="/dist/elm.js"></script>
  <style>
    body {
      margin: 0;
    }
  </style>
</head>

<body>
  <div id="myapp"></div>
  <script>
    var storedData = localStorage.getItem('login');
    let flags = storedData ? JSON.parse(storedData) : null;
    var app = Elm.Main.init({
      node: document.getElementById('myapp'),
      flags: flags
    });

    app.ports.updateLocalStorage.subscribe(message => {
      localStorage.setItem("login", JSON.stringify(message));
    });
    app.ports.toggleDialog.subscribe(id => {
      const dialog = document.querySelector(`#${id}`)
      if (dialog.open) {
        dialog.close();
      } else {
        dialog.showModal();
      }
    });
  </script>
</body>
</html>
 